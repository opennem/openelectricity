import { describe, expect, test } from 'vitest'
import interpolateData from '$lib/utils/Statistic/interpolate-data'
import data from "./power-2.json" assert { type: 'json' };
import {startOfMinute, addMinutes} from 'date-fns';

describe("Interpolate dataset", () => {

    let mockMinIntervalObject: StatsInterval = {
        intervalString: '5m',
        key: 'm',
        label: 'Minutes',
        seconds: 300,
        milliseconds: 300000,
        incrementerValue: 5,
        incrementerFn: addMinutes,
        startOfFn: startOfMinute

    }
    test("should return interpolated data from 30 minutes inteval to 5 minutes interval", () => {
        expect(interpolateData(data, mockMinIntervalObject, "history")[0].history.data).toStrictEqual([ 4993.833333333334,
            +   5191.666666666667,
            +   5389.5,
            +   5587.333333333333,
            +   5785.166666666667,
            +   5983,
            +   6142.833333333334,
            +   6302.666666666667,
            +   6462.5,
            +   6622.333333333334,
            +   6782.166666666666,
            +   6942,
            +   5785,
            +   4628.000000000001,
            +   3471,
            +   2314.0000000000005,
            +   1156.9999999999998,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   0,
            +   5.75,
            +   11.5,
            +   17.25,
            +   23,
            +   28.75,
            +   34.5,
            +   99.6,
            +   164.7,
            +   229.8,
            +   294.9,
            +   360.00000000000006,
            +   425.1,
            +   1246.0833333333333,
            +   2067.0666666666666,
            +   2888.05,
            +   3709.033333333333,
            +   4530.016666666667,
            +   5351,
            +   5530.5,
            +   5710,
            +   5889.5,
            +   6069,
            +   6248.5,
            +   6428,
            +   6589,
            +   6750,
            +   6911,
            +   7072,
            +   7233,
            +   7394,
            +   7511,
            +   7628,
            +   7745,
            +   7862,
            +   7979,
            +   8096,
            +   8174.333333333334,
            +   8252.666666666668,
            +   8331,
            +   8409.333333333332,
            +   8487.666666666668,
            +   8566,
            +   8603.666666666668,
            +   8641.333333333334,
            +   8679,
            +   8716.666666666666,
            +   8754.333333333334,
            +   8792,
            +   8777.833333333334,
            +   8763.666666666668,
            +   8749.5,
            +   8735.333333333332,
            +   8721.166666666668,
            +   8707,])
    })
})